"use client"

import { div } from "framer-motion/client"
import { useEffect, useState } from "react"

export default function Button({ darkMode }: { darkMode: boolean }) {
    const [select, setSelect] = useState(false)
    const [showIcon, setShowIcon] = useState(false)

    const [scale, setScale] = useState(false)

    useEffect(() => {
        setScale(true)
        const timer = setTimeout(() => setScale(false), 200)
        return () => clearTimeout(timer)
    }, [select])

    useEffect(() => {
        const timer = setTimeout(() => {
            setShowIcon(select);
        }, 200)

        return () => clearTimeout(timer);
    }, [select])

    return (
        <div onClick={() => setSelect(!select)} className={`relative ${scale ? "scale-[0.85]" : ""} flex items-center justify-center transition-all duration-250 ease-in-out cursor-pointer h-[50px] w-[50px] rounded-full  ${darkMode ? "bg-gray-200/15" : "bg-[#E9E9EB]"}`}>
            <div className={`absolute ${scale ? "scale-[0.85]" : ""} top-0 h-[50px] w-[50px] transition-all duration-250 ease-in-out rounded-full ${scale ? "backdrop-blur-xs bg-white/30" : ""}`}></div>

            <div className="">
                {
                    !showIcon ? (
                        <svg width="20" height="20" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path className="mix-blend-mode:plus-darker" d="M0 8.57471C0 7.38493 0.221354 6.27539 0.664062 5.24609C1.10677 4.21126 1.72103 3.30094 2.50684 2.51514C3.29818 1.7238 4.21126 1.10677 5.24609 0.664062C6.28092 0.221354 7.39046 0 8.57471 0C9.75342 0 10.8602 0.221354 11.895 0.664062C12.9354 1.10677 13.8485 1.7238 14.6343 2.51514C15.4201 3.30094 16.0343 4.21126 16.4771 5.24609C16.9253 6.27539 17.1494 7.38493 17.1494 8.57471C17.1494 9.51546 17 10.4175 16.7012 11.2808C16.4023 12.1385 15.9873 12.916 15.4561 13.6133L20.5693 18.7432C20.6966 18.8815 20.7935 19.0337 20.8599 19.1997C20.9263 19.3713 20.9595 19.5511 20.9595 19.7393C20.9595 19.9993 20.9014 20.2373 20.7852 20.4531C20.6689 20.6689 20.5029 20.8405 20.2871 20.9678C20.0768 21.0951 19.8361 21.1587 19.5649 21.1587C19.3768 21.1587 19.1942 21.1227 19.0171 21.0508C18.8455 20.9844 18.6906 20.8848 18.5522 20.752L13.4141 15.6055C12.7279 16.0869 11.9753 16.4632 11.1562 16.7344C10.3372 17.0055 9.47673 17.1411 8.57471 17.1411C7.39046 17.1411 6.28092 16.9198 5.24609 16.4771C4.21126 16.0288 3.29818 15.4118 2.50684 14.626C1.72103 13.8402 1.10677 12.9299 0.664062 11.895C0.221354 10.8602 0 9.75342 0 8.57471ZM1.93408 8.57471C1.93408 9.48779 2.10563 10.3455 2.44873 11.1479C2.79736 11.9448 3.27327 12.6476 3.87646 13.2563C4.48519 13.8651 5.19076 14.341 5.99316 14.6841C6.79557 15.0272 7.65609 15.1987 8.57471 15.1987C9.48779 15.1987 10.3428 15.0272 11.1396 14.6841C11.9421 14.341 12.6476 13.8651 13.2563 13.2563C13.8651 12.6476 14.341 11.9448 14.6841 11.1479C15.0272 10.3455 15.1987 9.48779 15.1987 8.57471C15.1987 7.65609 15.0272 6.79557 14.6841 5.99316C14.341 5.19076 13.8651 4.48519 13.2563 3.87646C12.6476 3.26774 11.9421 2.79183 11.1396 2.44873C10.3428 2.10563 9.48779 1.93408 8.57471 1.93408C7.65609 1.93408 6.79557 2.10563 5.99316 2.44873C5.19076 2.79183 4.48519 3.26774 3.87646 3.87646C3.27327 4.48519 2.79736 5.19076 2.44873 5.99316C2.10563 6.79557 1.93408 7.65609 1.93408 8.57471Z" fill={darkMode ? "#999999" : "#404040"} />
                        </svg>
                    ) : (
                        <svg width="40" height="40" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path className="mix-blend-mode:plus-darker" d="M13.7739 30.2495C13.6411 30.1167 13.5526 29.959 13.5083 29.7764C13.464 29.5993 13.464 29.4194 13.5083 29.2368C13.5526 29.0597 13.6383 28.9103 13.7656 28.7886L20.5308 22.0234L13.7656 15.2583C13.6383 15.1366 13.5526 14.9871 13.5083 14.8101C13.464 14.633 13.464 14.4531 13.5083 14.2705C13.5526 14.0879 13.6411 13.9302 13.7739 13.7974C13.9067 13.6646 14.0617 13.576 14.2388 13.5317C14.4214 13.4875 14.6012 13.4875 14.7783 13.5317C14.9554 13.576 15.1104 13.6618 15.2432 13.7891L22 20.5542L28.7568 13.7974C28.8896 13.6646 29.0446 13.576 29.2217 13.5317C29.3988 13.4875 29.5758 13.4875 29.7529 13.5317C29.93 13.576 30.085 13.6646 30.2178 13.7974C30.3561 13.9302 30.4474 14.0879 30.4917 14.2705C30.536 14.4476 30.536 14.6247 30.4917 14.8018C30.4474 14.9788 30.3589 15.1338 30.2261 15.2666L23.4692 22.0234L30.2261 28.7803C30.3589 28.9131 30.4447 29.0653 30.4834 29.2368C30.5277 29.4139 30.5277 29.591 30.4834 29.7681C30.4447 29.9507 30.3561 30.1112 30.2178 30.2495C30.085 30.3823 29.93 30.4709 29.7529 30.5151C29.5758 30.5594 29.3988 30.5594 29.2217 30.5151C29.0446 30.4709 28.8896 30.3823 28.7568 30.2495L22 23.4927L15.2432 30.2578C15.1104 30.3851 14.9554 30.4709 14.7783 30.5151C14.6012 30.5594 14.4242 30.5594 14.2471 30.5151C14.07 30.4709 13.9123 30.3823 13.7739 30.2495Z" fill={darkMode ? "#999999" : "#404040"} />
                        </svg>
                    )
                }
            </div>
        </div>
    )
}